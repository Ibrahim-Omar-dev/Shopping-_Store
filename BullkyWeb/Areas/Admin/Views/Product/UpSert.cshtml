@model ProductVM

@{
	ViewData["Title"] = "UpSert";
}
<div class="card shadow border-0" style="margin-bottom:100px">
	<div class="card-header bg-secondary bg-gradient ml-0 py-3">
		<div class="row">
			<div class="col-12 text-center">
				<h2 class="text-white py-2">@(Model.Product.Id == 0 ? "Create" : "Update") Product</h2>
			</div>
		</div>
	</div>
	<div class="card-body my-4">
		<form asp-action="UpSert" class="row" enctype="multipart/form-data">
			<input type="hidden" asp-for="Product.Id" />
			@* <input type="hidden" asp-for="Product.ImageUrl" /> *@
			<div class="col-10">
				<div asp-validation-summary="All" class="text-danger"></div>

				<div class="form-flating py-2 col-12">
					<input asp-for="Product.Title" class="form-control border-0 shadow" />
					<label asp-for="Product.Title" class="ms-2"></label>
					<span asp-validation-for="Product.Title" class="text-danger"></span>
				</div>

				<div class="form-flating py-2 col-12">
					<textarea  asp-for="Product.Description" class="form-control border-0 shadow"></textarea>
					<label asp-for= "Product.Description" class="ms-2"></label>
					<span asp-validation-for="Product.Description" class="text-danger"></span>
				</div>

				<div class="form-flating py-2 col-12">
					<input asp-for="Product.Author" class="form-control border-0 shadow" />
					<label asp-for="Product.Author" class="ms-2"></label>
					<span asp-validation-for="Product.Author" class="text-danger"></span>
				</div>

				<div class="form-flating py-2 col-12">
					<input asp-for="Product.ISBN" class="form-control border-0 shadow" />
					<label asp-for= "Product.ISBN" class="ms-2"></label>
					<span asp-validation-for="Product.ISBN" class="text-danger"></span>
				</div>

				<div class="form-flating py-2 col-12">
					<input asp-for="Product.ListPrice" class="form-control border-0 shadow" />
					<label asp-for="Product.ListPrice" class="ms-2"></label>
					<span asp-validation-for="Product.ListPrice" class="text-danger"></span>
				</div>

				<div class="form-flating py-2 col-12">
					<input asp-for="Product.Price" class="form-control border-0 shadow" />
					<label asp-for= "Product.Price" class="ms-2"></label>
					<span asp-validation-for="Product.Price" class="text-danger"></span>
				</div>

				<div class="form-flating py-2 col-12">
					<input asp-for="Product.Price50" class="form-control border-0 shadow" />
					<label asp-for="Product.Price50" class="ms-2"></label>
					<span asp-validation-for="Product.Price50" class="text-danger"></span>
				</div>

				<div class="form-flating py-2 col-12">
					<input asp-for="Product.Price100" class="form-control border-0 shadow" />
					<label asp-for= "Product.Price100" class="ms-2"></label>
					<span asp-validation-for="Product.Price100" class="text-danger"></span>
				</div>

				@* <div class="form-floating py-2 col-12">
         <select asp-for="CategoryId" asp-items=@(ViewData["CategoryList"] as IEnumerable<SelectListItem>)  class="form-select border-0 shadow">
             <option disabled selected>--Select Option--</option>
         </select>
         <label asp-for="CategoryId" class="ms-2"></label>
         <span asp-validation-for="CategoryId" class="text-danger"></span>
    </div> *@
				<div class="form-floating py-2 col-12">
					<select asp-for="Product.CategoryId" asp-items=@Model.CategoryList  class="form-select border-0 shadow">
						<option disabled selected>--Select Option--</option>
					</select>
					<label asp-for="Product.CategoryId" class="ms-2"></label>
					<span asp-validation-for="Product.CategoryId" class="text-danger"></span>
				</div>

				<div class="form-floating py-2 col-12">
					<input asp-for="Product.ImageProduct" type="file" name="files" class="form-control border-0 shadow" multiple />
					<label asp-for="Product.ImageProduct" class="ms-2"></label>
					<span asp-validation-for="Product.ImageProduct" class="text-danger"></span>
				</div>
				<!-- Buttons -->
				<div class="row pt-2 mt-20">
					<div class="col-6 col-md-3 ">
						@if (@Model.Product.Id == 0)
						{
							<button type="submit" class="btn btn-primary form-control">Create</button>
						}
						else
						{
							<button type="submit" class="btn btn-primary form-control">Update</button>
						}

					</div>
					<div class="col-6 col-md-3">
						<a asp-action="Index" class="btn btn-secondary form-control border">Back To List</a>
					</div>
				</div>
			</div>
			<div class="col-2">
				@if(Model.Product.ImageProduct != null)
				{
					foreach (var image in Model.Product.ImageProduct)
					{
						<div class="border p-1 m-2 text-center">
							<img src="@image.ImageUrl" width="100%" style="border:1px solid #bbb9b9;border-radius:5px"/>
							<a asp-action="DeleteImage" class="btn btn-danger" asp-route-imageId="@image.Id">
								<i class="bi bi-trash-fill"></i> Delete
							</a>
						</div>
					}
				}
		</div>
			
	</form>
		</div>
	</div>



@section Scripts {
	@{
		await Html.RenderPartialAsync("_ValidationScriptsPartial");
	}
				<script>
		  tinymce.init({
			selector: '#myTextarea',
			height: 300,
			menubar: false,
			plugins: 'lists link image preview',
			toolbar: 'undo redo | formatselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist | link image preview'
		  });
		</script>
}
